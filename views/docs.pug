extends layout

block content
    p Filter:
        =docdata.query
    table.striped
        tbody
            th Dokument
            th Seiten
            th Datum
            th Partner
            th Besitzer
            th Vorschau
            each item in docdata
                tr
                    td.ppgrid
                        -var linktitle = '';
                        if(item.subject)
                            -linktitle = item.subject;
                        else
                            -linktitle = item._id;
                        a.overview(href="/doc/" + item._id + '/update/')= linktitle
                    td.ppgrind= item.previews
                    td.ppgrid
                        if(item.docdate)
                            span= moment(item.docdate, 'DD.MM.YYYY').format('DD.MM.YYYY')
                        else
                            ='-'
                    td.ppgrid
                        if(item.partner)
                            span= item.partner
                        else
                            ='-'
                    td.ppgrid
                        if(item.users)
                            if(typeof item.users !== 'string')
                                each user in item.users
                                    span= user
                                    =' '
                            else
                                    span= item.users
                        else
                            ='-'
                    td.ppgrid
                        a.hoverover(id=item._id, style='cursor: zoom-in;')
                            i.material-icons.small attach_file

        div#hoverimage.popup(style='display:none;')= ' '
        script.
            $(document).ready(function(){
                $('.hoverover').on('mouseenter', function(evt){
                    let src = this;
                    let left = $(window).width() / 3.;
                    console.log(left);
                    console.log($(window).width());

                    $('#hoverimage')
                        .html('<img height="' + ($(window).height() * 0.85) + '" src="/doc/' + src.id + '/preview/" />')
                        .css({left: left, top: 100})
                        .show();
                        $(this).on('mouseleave', function(){
                            $('#hoverimage').hide();
                    });
                });
            });